<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
    <ModulePrefs title="TM TEST"> 
    </ModulePrefs>
    <Content type="html">
    <![CDATA[ 
        <div id="content-div"></div>
        <script type="text/javascript">
            var view = document.getElementById( 'content-div' );
            function request (){    
                view.innerHTML = '';
                var params = {};
                var ts = (new Date()).getTime();
                params[ gadgets.io.RequestParameters.CONTENT_TYPE ] = gadgets.io.ContentType.JSON;
                // params[ gadgets.io.RequestParameters.METHOD ] = gadgets.io.MethodType.GET;
                params[ gadgets.io.RequestParameters.REFRESH_INTERVAL ] = 0;  // does this work?
                var url = "http://recruit-mtl.googlecode.com/svn/trunk/mixi/yugo/sample.js?ss";  
                gadgets.io.makeRequest( url, callback, params );
            };
            function callback ( obj ){
                var html = "";
                console.log(obj);
                for( var i=0; i<obj.data.length; i++ ){
                    var row = obj.data[i];
                    html += '<li>' ;
                    html += '<a href="' + row.url + '">'
                    html += '<img src="' + row.img + '" style="vertical-align:top">';
                    html += row.title + "</a><br/>";
                    html += row.desc + '</li>';
                }
                html += '</ol>';
                console.log(html);
                view.innerHTML = html;
            };
        </script>
        <div style="margin-top:10px">
            <input type="button" value="make API request" onclick="request()"/>
        </div>
    ]]>
    </Content> 
</Module>
